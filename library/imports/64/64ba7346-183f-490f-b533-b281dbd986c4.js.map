{"version":3,"sources":["assets/Script/player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Player extends cc.Component {\n\n    @property(cc.Float)\n    jumpHeight:number = 0 ;\n\n    @property(cc.Float)\n    jumpDuration: number = 0;\n\n    @property(cc.Float)\n    maxMoveSpeed: number = 0;\n\n    @property(cc.Float)\n    accel:number = 0;\n\n    @property({\n        type: cc.AudioClip\n    })\n    jumpSound: cc.AudioClip = null;\n\n    jumpAction: cc.ActionInterval = null;\n    accLeft:boolean = false;\n    accRight:boolean = false;\n    xSpeed:number = 0;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.jumpAction = this.setJumpAction();\n        this.node.runAction(this.jumpAction);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\n    }\n\n    start () {\n\n    }\n\n    setJumpAction(){\n        const jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0,this.jumpHeight)).easing(cc.easeCircleActionOut());\n        const jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionInOut());\n        const jumpSound = cc.callFunc(()=>cc.audioEngine.playEffect(this.jumpSound,false),this);\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown,jumpSound));\n    }\n    onKeyDown(event){\n        switch (event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accRight = false;\n                this.accLeft = true;\n                break;\n            case cc.macro.KEY.d:\n                this.accLeft = false;\n                this.accRight=true;\n                break;\n        }\n    }\n\n    onKeyUp(event){\n        switch (event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.d:\n                this.accRight = false;\n                break;\n        }\n    }\n    \n    update (dt) {\n        if(this.accLeft){\n            this.xSpeed -= this.accel*dt\n        }else if(this.accRight){\n            this.xSpeed += this.accel*dt;\n        }\n        this.xSpeed = Math.min(this.xSpeed,this.maxMoveSpeed);\n        this.xSpeed = Math.max(this.xSpeed,-this.maxMoveSpeed);\n        this.node.x += this.xSpeed * dt;\n\n        if ( this.node.x > this.node.parent.width/2) {\n            this.node.x = this.node.parent.width/2;\n            this.xSpeed = 0;\n        } else if (this.node.x < -this.node.parent.width/2) {\n            this.node.x = -this.node.parent.width/2;\n            this.xSpeed = 0;\n        }\n    }\n}\n"]}