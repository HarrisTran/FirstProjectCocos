{"version":3,"sources":["assets/Script/game.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAkC,wBAAY;IAA9C;QAAA,qEAkFC;QA/EG,gBAAU,GAAc,IAAI,CAAC;QAG7B,YAAM,GAAY,IAAI,CAAC;QAGvB,YAAM,GAAY,IAAI,CAAC;QAGvB,kBAAY,GAAa,IAAI,CAAC;QAK9B,gBAAU,GAAiB,IAAI,CAAC;QAGhC,qBAAe,GAAU,CAAC,CAAC;QAG3B,qBAAe,GAAU,CAAC,CAAC;QAE3B,aAAO,GAAU,CAAC,CAAC;QACnB,WAAK,GAAU,CAAC,CAAC;QACjB,kBAAY,GAAU,CAAC,CAAC;QACxB,WAAK,GAAW,CAAC,CAAC;;IAsDtB,CAAC;IAlDG,wBAAwB;IAExB,qBAAM,GAAN;QACI,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;QACtE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;IACtD,CAAC;IACD,2BAAY,GAAZ;QACI,IAAM,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,IAAM,GAAG,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACtC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzB,IAAM,SAAS,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC/C,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,YAAY,GAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,CAAC,IAAI,CAAC,eAAe,GAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACnG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACnC,CAAC;IACD,iCAAkB,GAAlB;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,UAAU,GAAC,EAAE,CAAC;QAC5F,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACnC,IAAM,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,GAAG,CAAC,GAAC,CAAC,GAAC,IAAI,CAAC;QACzC,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IACD,wBAAS,GAAT;QACI,IAAI,CAAC,KAAK,IAAE,CAAC,CAAC;QACd,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;QAClD,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAC,KAAK,CAAC,CAAC;IACrD,CAAC;IAED,oBAAK,GAAL;IAEA,CAAC;IAED,uBAAQ,GAAR;QACI,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QAC7B,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,IAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAC;YAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAQ;SACX;QACD,IAAI,CAAC,KAAK,IAAE,EAAE,CAAC;IACnB,CAAC;IA9ED;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACW;IAK9B;QAHC,QAAQ,CAAC;YACN,IAAI,EAAE,EAAE,CAAC,SAAS;SACrB,CAAC;4CAC8B;IAGhC;QADC,QAAQ;iDACkB;IAG3B;QADC,QAAQ;iDACkB;IAvBV,IAAI;QADxB,OAAO;OACa,IAAI,CAkFxB;IAAD,WAAC;CAlFD,AAkFC,CAlFiC,EAAE,CAAC,SAAS,GAkF7C;kBAlFoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n\n    @property(cc.Prefab)\n    starPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    ground: cc.Node = null;\n\n    @property(cc.Node)\n    player: cc.Node = null;\n\n    @property(cc.Label)\n    scoreDisplay: cc.Label = null;\n\n    @property({\n        type: cc.AudioClip\n    })\n    scoreSound: cc.AudioClip = null;\n\n    @property\n    maxStarDuration:number = 0;\n\n    @property\n    minStarDuration:number = 0;\n\n    groundY:number = 0;\n    score:number = 0;\n    starDuration:number = 0;\n    timer: number = 0;\n\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.director.preloadScene('Menu');\n        this.score = 0;\n        this.timer = 0;\n        this.starDuration = 0;\n        this.spawnNewStar();\n        this.groundY = this.ground.y + this.ground.height*this.ground.anchorY;\n        this.scoreDisplay.string = 'Score: ' + this.score;\n    }\n    spawnNewStar() {\n        const newStar = cc.instantiate(this.starPrefab);\n        this.node.addChild(newStar);\n        const pos = this.getNewStarPosition();\n        newStar.setPosition(pos);\n        const component = newStar.getComponent('star');\n        component.game = this;\n        this.starDuration=this.minStarDuration + Math.random()*(this.maxStarDuration-this.minStarDuration);\n        this.timer = 0;\n        console.log(this.starDuration);\n    }\n    getNewStarPosition(){\n        const randY = this.groundY + Math.random()*this.player.getComponent('player').jumpHeight-10;\n        const maxX = this.node.width * 0.5;\n        const randX = (Math.random()-0.5)*2*maxX;\n        return cc.v2(randX,randY);\n    }\n    gainScore(){\n        this.score+=1;\n        this.scoreDisplay.string = 'Score: ' + this.score;\n        cc.audioEngine.playEffect(this.scoreSound,false);\n    }\n\n    start () {\n\n    }\n\n    gameOver(){\n        this.player.stopAllActions();\n        cc.director.loadScene('Menu');\n    }\n\n    update (dt) {\n        if(this.timer > this.starDuration){\n            this.gameOver();\n            return ;\n        }\n        this.timer+=dt;\n    }\n}\n"]}